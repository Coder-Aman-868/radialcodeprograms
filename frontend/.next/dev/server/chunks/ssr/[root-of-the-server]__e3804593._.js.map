{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///F:/radialcodeprograms/frontend/lib/api.ts"],"sourcesContent":["import axios from 'axios';\r\nimport Cookies from 'js-cookie';\r\n\r\nconst API_URL = process.env.STRAPI_URL || 'http://localhost:1337';\r\nconst PUBLIC_API_TOKEN = process.env.NEXT_PUBLIC_STRAPI_API_TOKEN;\r\n\r\nconst api = axios.create({\r\n  baseURL: `${API_URL}/api`,\r\n});\r\n\r\n// Add auth token to requests when available\r\napi.interceptors.request.use((config) => {\r\n  const token = Cookies.get('token');\r\n  if (token) {\r\n    config.headers.Authorization = `Bearer ${token}`;\r\n  }\r\n  return config;\r\n});\r\n\r\n// Create a public API instance with API token if available\r\nconst createPublicApi = () => {\r\n  const publicApi = axios.create({\r\n    baseURL: `${API_URL}/api`,\r\n    timeout: 5000,\r\n  });\r\n  \r\n  if (PUBLIC_API_TOKEN) {\r\n    publicApi.defaults.headers.common['Authorization'] = `Bearer ${PUBLIC_API_TOKEN}`;\r\n  }\r\n  \r\n  return publicApi;\r\n};\r\n\r\nexport const auth = {\r\n  login: async (email: string, password: string) => {\r\n    const response = await api.post('/auth/local', {\r\n      identifier: email,\r\n      password,\r\n    });\r\n    return response.data;\r\n  },\r\n  \r\n  me: async () => {\r\n    const response = await api.get('/users/me');\r\n    return response.data;\r\n  },\r\n};\r\n\r\n// Mock programs data for fallback when backend is not available\r\nconst mockPrograms = [\r\n  {\r\n    id: 1,\r\n    attributes: {\r\n      name: \"Advanced React Development Workshop\",\r\n      date: \"2024-12-15\",\r\n      venue: \"Tech Hub, Downtown\",\r\n      description: \"Learn advanced React patterns, hooks, and state management techniques in this comprehensive workshop.\",\r\n      slug: \"advanced-react-workshop\",\r\n      certificateStatus: \"Ready\" as const,\r\n      createdAt: \"2024-12-01T00:00:00.000Z\",\r\n      updatedAt: \"2024-12-01T00:00:00.000Z\"\r\n    }\r\n  },\r\n  {\r\n    id: 2,\r\n    attributes: {\r\n      name: \"Full Stack JavaScript Bootcamp\",\r\n      date: \"2024-12-20\",\r\n      venue: \"Innovation Center\",\r\n      description: \"Complete bootcamp covering Node.js, Express, React, and MongoDB for full-stack development.\",\r\n      slug: \"fullstack-javascript-bootcamp\",\r\n      certificateStatus: \"Not Ready\" as const,\r\n      createdAt: \"2024-12-01T00:00:00.000Z\",\r\n      updatedAt: \"2024-12-01T00:00:00.000Z\"\r\n    }\r\n  },\r\n  {\r\n    id: 3,\r\n    attributes: {\r\n      name: \"Python Data Science Workshop\",\r\n      date: \"2024-12-25\",\r\n      venue: \"Data Lab, University Campus\",\r\n      description: \"Hands-on workshop covering pandas, numpy, matplotlib, and machine learning basics with Python.\",\r\n      slug: \"python-data-science-workshop\",\r\n      certificateStatus: \"Ready\" as const,\r\n      createdAt: \"2024-12-01T00:00:00.000Z\",\r\n      updatedAt: \"2024-12-01T00:00:00.000Z\"\r\n    }\r\n  },\r\n  {\r\n    id: 4,\r\n    attributes: {\r\n      name: \"Aman's Programming Workshop\",\r\n      date: \"2024-12-30\",\r\n      venue: \"Digital Learning Center\",\r\n      description: \"Comprehensive programming workshop covering modern development practices and industry best practices.\",\r\n      slug: \"aman\",\r\n      certificateStatus: \"Ready\" as const,\r\n      createdAt: \"2024-12-01T00:00:00.000Z\",\r\n      updatedAt: \"2024-12-01T00:00:00.000Z\"\r\n    }\r\n  }\r\n];\r\n\r\nexport const programs = {\r\n  getAll: async () => {\r\n    try {\r\n      const publicApi = createPublicApi();\r\n      const response = await publicApi.get('/programs?populate=*');\r\n      return response.data;\r\n    } catch (error: any) {\r\n      console.warn('Public API failed for getAll:', error.response?.status, error.message);\r\n      try {\r\n        const response = await api.get('/programs?populate=*');\r\n        return response.data;\r\n      } catch (authError) {\r\n        console.warn('Backend not available, using mock data');\r\n        return { data: mockPrograms };\r\n      }\r\n    }\r\n  },\r\n  \r\n  getBySlug: async (slug: string) => {\r\n    const isDev = process.env.NODE_ENV === 'development';\r\n    if (isDev) console.log('getBySlug called with slug:', slug);\r\n    \r\n    // First try the backend APIs with public API token\r\n    const publicApi = createPublicApi();\r\n    \r\n    try {\r\n      if (isDev) console.log('Trying public API with token...');\r\n      const response = await publicApi.get(`/programs?filters[slug][$eq]=${slug}&populate=*`);\r\n      if (response.data && response.data.data && response.data.data.length > 0) {\r\n        const program = response.data.data[0];\r\n        if (isDev) console.log('Found program in public API:', program.attributes.name);\r\n        return program;\r\n      } else {\r\n        if (isDev) console.log('No program found in backend for slug:', slug);\r\n      }\r\n    } catch (error: any) {\r\n      if (isDev) console.warn('Public API failed:', error.response?.status, error.message);\r\n      \r\n      // If it's a 403 (forbidden), try with user auth token\r\n      if (error.response?.status === 403) {\r\n        if (isDev) console.log('Public API returned 403, trying with user auth...');\r\n        try {\r\n          const response = await api.get(`/programs?filters[slug][$eq]=${slug}&populate=*`);\r\n          if (response.data && response.data.data && response.data.data.length > 0) {\r\n            const program = response.data.data[0];\r\n            if (isDev) console.log('Found program in auth API:', program.attributes.name);\r\n            return program;\r\n          }\r\n        } catch (authError: any) {\r\n          if (isDev) console.warn('Auth API also failed:', authError.response?.status, authError.message);\r\n        }\r\n      }\r\n    }\r\n    \r\n    // If backend fails, check mock data as fallback\r\n    const mockProgram = mockPrograms.find(p => p.attributes.slug === slug);\r\n    if (isDev) {\r\n      console.log('Available mock slugs:', mockPrograms.map(p => p.attributes.slug));\r\n      console.log('Mock program found:', mockProgram ? 'Yes' : 'No');\r\n    }\r\n    \r\n    if (mockProgram) {\r\n      if (isDev) console.log('Returning mock program:', mockProgram.attributes.name);\r\n      return mockProgram;\r\n    }\r\n    \r\n    // Return null if program not found anywhere\r\n    if (isDev) console.log('Program not found anywhere for slug:', slug);\r\n    return null;\r\n  },\r\n  \r\n  create: async (data: any) => {\r\n    const response = await api.post('/programs', { data });\r\n    return response.data;\r\n  },\r\n  \r\n  update: async (id: number, data: any) => {\r\n    const response = await api.put(`/programs/${id}`, { data });\r\n    return response.data;\r\n  },\r\n  \r\n  delete: async (id: number) => {\r\n    const response = await api.delete(`/programs/${id}`);\r\n    return response.data;\r\n  },\r\n};\r\n\r\n// Mock students data for fallback\r\nconst mockStudents: any[] = [];\r\n\r\nexport const students = {\r\n  getByProgram: async (programId: number) => {\r\n    try {\r\n      const response = await api.get(`/students?filters[program][id][$eq]=${programId}&populate=*`);\r\n      return response.data;\r\n    } catch (error) {\r\n      console.warn('Backend not available for students, using mock data');\r\n      return { data: mockStudents.filter(s => s.attributes.program?.data?.id === programId) };\r\n    }\r\n  },\r\n  \r\n  create: async (data: any) => {\r\n    // Create a public API instance for student registration\r\n    const publicApi = axios.create({\r\n      baseURL: `${API_URL}/api`,\r\n    });\r\n    \r\n    try {\r\n      const response = await publicApi.post('/students', { data });\r\n      return response.data;\r\n    } catch (error) {\r\n      try {\r\n        // If public API fails, try with auth (for admin access)\r\n        const response = await api.post('/students', { data });\r\n        return response.data;\r\n      } catch (authError) {\r\n        // Fallback to mock storage\r\n        console.warn('Backend not available, storing in mock data');\r\n        const newStudent = {\r\n          id: mockStudents.length + 1,\r\n          attributes: {\r\n            ...data,\r\n            createdAt: new Date().toISOString(),\r\n            updatedAt: new Date().toISOString()\r\n          }\r\n        };\r\n        mockStudents.push(newStudent);\r\n        return { data: newStudent };\r\n      }\r\n    }\r\n  },\r\n  \r\n  delete: async (id: number) => {\r\n    try {\r\n      const response = await api.delete(`/students/${id}`);\r\n      return response.data;\r\n    } catch (error) {\r\n      console.warn('Backend not available for delete operation');\r\n      const index = mockStudents.findIndex(s => s.id === id);\r\n      if (index > -1) {\r\n        mockStudents.splice(index, 1);\r\n      }\r\n      return { data: null };\r\n    }\r\n  },\r\n  \r\n  getByEmailAndProgram: async (email: string, programSlug: string) => {\r\n    // Create a public API instance for certificate download\r\n    const publicApi = axios.create({\r\n      baseURL: `${API_URL}/api`,\r\n    });\r\n    \r\n    try {\r\n      const response = await publicApi.get(`/students?filters[email][$eq]=${email}&filters[program][slug][$eq]=${programSlug}&populate=*`);\r\n      return response.data;\r\n    } catch (error) {\r\n      try {\r\n        // If public API fails, try with auth (for admin access)\r\n        const response = await api.get(`/students?filters[email][$eq]=${email}&filters[program][slug][$eq]=${programSlug}&populate=*`);\r\n        return response.data;\r\n      } catch (authError) {\r\n        // Fallback to mock data\r\n        console.warn('Backend not available, checking mock students');\r\n        const matchingStudents = mockStudents.filter(s => \r\n          s.attributes.email === email && \r\n          s.attributes.program?.data?.attributes?.slug === programSlug\r\n        );\r\n        return { data: matchingStudents };\r\n      }\r\n    }\r\n  },\r\n};\r\n\r\n// Mock certificates data for fallback\r\nconst mockCertificates: any[] = [];\r\n\r\nexport const certificates = {\r\n  getByProgram: async (programId: number) => {\r\n    // Create a public API instance for certificate access\r\n    const publicApi = axios.create({\r\n      baseURL: `${API_URL}/api`,\r\n    });\r\n    \r\n    try {\r\n      const response = await publicApi.get(`/certificates?filters[program][id][$eq]=${programId}&populate=*`);\r\n      return response.data;\r\n    } catch (error) {\r\n      try {\r\n        // If public API fails, try with auth (for admin access)\r\n        const response = await api.get(`/certificates?filters[program][id][$eq]=${programId}&populate=*`);\r\n        return response.data;\r\n      } catch (authError) {\r\n        // Fallback to mock data\r\n        console.warn('Backend not available for certificates, using mock data');\r\n        return { data: mockCertificates.filter(c => c.attributes.program?.data?.id === programId) };\r\n      }\r\n    }\r\n  },\r\n  \r\n  create: async (data: any) => {\r\n    try {\r\n      const response = await api.post('/certificates', { data });\r\n      return response.data;\r\n    } catch (error) {\r\n      console.warn('Backend not available for certificate creation');\r\n      const newCertificate = {\r\n        id: mockCertificates.length + 1,\r\n        attributes: {\r\n          ...data,\r\n          createdAt: new Date().toISOString(),\r\n          updatedAt: new Date().toISOString()\r\n        }\r\n      };\r\n      mockCertificates.push(newCertificate);\r\n      return { data: newCertificate };\r\n    }\r\n  },\r\n  \r\n  update: async (id: number, data: any) => {\r\n    try {\r\n      const response = await api.put(`/certificates/${id}`, { data });\r\n      return response.data;\r\n    } catch (error) {\r\n      console.warn('Backend not available for certificate update');\r\n      const index = mockCertificates.findIndex(c => c.id === id);\r\n      if (index > -1) {\r\n        mockCertificates[index].attributes = { ...mockCertificates[index].attributes, ...data };\r\n      }\r\n      return { data: mockCertificates[index] || null };\r\n    }\r\n  },\r\n};\r\n\r\nexport default api;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 463, "column": 0}, "map": {"version":3,"sources":["file:///F:/radialcodeprograms/frontend/lib/auth-context.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { createContext, useContext, useEffect, useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport Cookies from 'js-cookie';\r\nimport { auth } from './api';\r\nimport { User } from './types';\r\n\r\ninterface AuthContextType {\r\n  user: User | null;\r\n  loading: boolean;\r\n  login: (email: string, password: string) => Promise<{ success: boolean; error?: string }>;\r\n  logout: () => void;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    const token = Cookies.get('token');\r\n    if (token) {\r\n      auth.me()\r\n        .then(setUser)\r\n        .catch(() => {\r\n          Cookies.remove('token');\r\n        })\r\n        .finally(() => setLoading(false));\r\n    } else {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  const login = async (email: string, password: string) => {\r\n    try {\r\n      const response = await auth.login(email, password);\r\n      Cookies.set('token', response.jwt);\r\n      setUser(response.user);\r\n      router.push('/dashboard');\r\n      return { success: true };\r\n    } catch (error: any) {\r\n      return {\r\n        success: false,\r\n        error: error.response?.data?.error?.message || 'Login failed'\r\n      };\r\n    }\r\n  };\r\n\r\n  const logout = () => {\r\n    Cookies.remove('token');\r\n    setUser(null);\r\n    router.push('/login');\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user, loading, login, logout }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useAuth() {\r\n  const context = useContext(AuthContext);\r\n  if (context === undefined) {\r\n    throw new Error('useAuth must be used within an AuthProvider');\r\n  }\r\n  return context;\r\n}"],"names":[],"mappings":";;;;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAeA,MAAM,4BAAc,IAAA,sNAAa,EAA8B;AAExD,SAAS,aAAa,EAAE,QAAQ,EAAiC;IACtE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAc;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,SAAS,IAAA,+IAAS;IAExB,IAAA,kNAAS,EAAC;QACR,MAAM,QAAQ,gKAAO,CAAC,GAAG,CAAC;QAC1B,IAAI,OAAO;YACT,kHAAI,CAAC,EAAE,GACJ,IAAI,CAAC,SACL,KAAK,CAAC;gBACL,gKAAO,CAAC,MAAM,CAAC;YACjB,GACC,OAAO,CAAC,IAAM,WAAW;QAC9B,OAAO;YACL,WAAW;QACb;IACF,GAAG,EAAE;IAEL,MAAM,QAAQ,OAAO,OAAe;QAClC,IAAI;YACF,MAAM,WAAW,MAAM,kHAAI,CAAC,KAAK,CAAC,OAAO;YACzC,gKAAO,CAAC,GAAG,CAAC,SAAS,SAAS,GAAG;YACjC,QAAQ,SAAS,IAAI;YACrB,OAAO,IAAI,CAAC;YACZ,OAAO;gBAAE,SAAS;YAAK;QACzB,EAAE,OAAO,OAAY;YACnB,OAAO;gBACL,SAAS;gBACT,OAAO,MAAM,QAAQ,EAAE,MAAM,OAAO,WAAW;YACjD;QACF;IACF;IAEA,MAAM,SAAS;QACb,gKAAO,CAAC,MAAM,CAAC;QACf,QAAQ;QACR,OAAO,IAAI,CAAC;IACd;IAEA,qBACE,8OAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAS;YAAO;QAAO;kBACzD;;;;;;AAGP;AAEO,SAAS;IACd,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT"}}]
}