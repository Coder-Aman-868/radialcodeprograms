{"version":3,"sources":["../../../../components/AdminWrapper.tsx","../../../../components/Header.tsx","../../../../app/%28admin%29/programs/edit/%5Bid%5D/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useAuth } from '@/lib/auth-context';\r\nimport { LoadingSpinner } from '@/components/Icons';\r\n\r\ninterface AdminWrapperProps {\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport default function AdminWrapper({ children }: AdminWrapperProps) {\r\n  const { user, loading } = useAuth();\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    if (!loading && !user) {\r\n      router.push('/admin/login');\r\n    }\r\n  }, [user, loading, router]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-slate-50\" style={{\r\n        backgroundImage: `\r\n          radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.1) 0%, transparent 50%),\r\n          radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.1) 0%, transparent 50%),\r\n          radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.1) 0%, transparent 50%)\r\n        `\r\n      }}>\r\n        <div className=\"bg-white/70 backdrop-blur-lg rounded-2xl shadow-xl shadow-slate-300/20 border border-white/20 p-12 text-center\">\r\n          <LoadingSpinner className=\"mx-auto mb-4 text-primary\" size={48} />\r\n          <p className=\"text-slate-600 font-medium\">Loading...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!user) {\r\n    return null;\r\n  }\r\n\r\n  return <>{children}</>;\r\n}","import { useAuth } from '@/lib/auth-context';\r\n\r\nconst Header = () => {\r\n  const { user, logout } = useAuth();\r\n\r\n  return (\r\n    <header className=\"bg-white/80 backdrop-blur-md border-b border-slate-200/50 shadow-lg shadow-slate-200/20 sticky top-0 z-50\">\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n        <div className=\"flex justify-between items-center py-4\">\r\n          <div className=\"flex items-center\">\r\n            <h1 className=\"text-2xl font-bold text-primary drop-shadow-sm\">Radial Code</h1>\r\n            <span className=\"ml-4 text-slate-600 font-medium bg-slate-100/50 px-3 py-1 rounded-full text-sm backdrop-blur-sm\">Admin Portal</span>\r\n          </div>\r\n          \r\n          <div className=\"flex items-center space-x-4\">\r\n            <span className=\"text-slate-700 font-medium bg-white/60 px-4 py-2 rounded-lg backdrop-blur-sm shadow-sm\">\r\n              Welcome, {user?.username || user?.email}\r\n            </span>\r\n            <button\r\n              onClick={logout}\r\n              className=\"bg-primary/90 text-white px-6 py-2 rounded-lg hover:bg-primary transition-all duration-300 shadow-lg shadow-primary/20 hover:shadow-primary/30 backdrop-blur-sm transform hover:-translate-y-0.5 font-medium\"\r\n            >\r\n              Logout\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Header;","'use client';\r\n\r\nimport { useState, useEffect, useCallback } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useForm } from 'react-hook-form';\r\nimport AdminWrapper from '@/components/AdminWrapper';\r\nimport Header from '@/components/Header';\r\nimport { Input, Textarea, Button, DateTimeInput } from '@/components/Form';\r\nimport { programs } from '@/lib/api';\r\nimport { Program } from '@/lib/types';\r\nimport { PencilIcon, RocketIcon, BoltIcon, ArrowLeftIcon, XCircleIcon } from '@/components/Icons';\r\n\r\ninterface ProgramForm {\r\n  name: string;\r\n  date: string;\r\n  venue: string;\r\n  description: string;\r\n}\r\n\r\ninterface EditProgramProps {\r\n  params: Promise<{ id: string }>;\r\n}\r\n\r\nfunction EditProgramContent({ params }: EditProgramProps) {\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [program, setProgram] = useState<Program | null>(null);\r\n  const [id, setId] = useState<string>('');\r\n  const router = useRouter();\r\n  \r\n  const { register, handleSubmit, control, formState: { errors }, setValue } = useForm<ProgramForm>();\r\n\r\n  useEffect(() => {\r\n    params.then(({ id }) => setId(id));\r\n  }, [params]);\r\n\r\n  const loadProgram = useCallback(async () => {\r\n    if (!id) return;\r\n    \r\n    try {\r\n      const response = await programs.getAll();\r\n      const foundProgram = response.data.find((p: Program) => p.id === parseInt(id));\r\n      if (foundProgram) {\r\n        setProgram(foundProgram);\r\n        setValue('name', foundProgram.attributes.name);\r\n        setValue('date', foundProgram.attributes.date);\r\n        setValue('venue', foundProgram.attributes.venue);\r\n        setValue('description', foundProgram.attributes.description);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading program:', error);\r\n    }\r\n  }, [id, setValue]);\r\n\r\n  useEffect(() => {\r\n    if (id) {\r\n      loadProgram();\r\n    }\r\n  }, [id, loadProgram]);\r\n\r\n  const generateSlug = (name: string): string => {\r\n    return name\r\n      .toLowerCase()\r\n      .replace(/[^a-z0-9]+/g, '-')\r\n      .replace(/(^-|-$)/g, '');\r\n  };\r\n\r\n  const onSubmit = async (data: ProgramForm) => {\r\n    if (!program) return;\r\n    \r\n    setLoading(true);\r\n    setError('');\r\n    \r\n    try {\r\n      const slug = generateSlug(data.name);\r\n      await programs.update(program.id, {\r\n        ...data,\r\n        slug\r\n      });\r\n      \r\n      router.push('/admin/dashboard');\r\n    } catch (error: any) {\r\n      setError(error.response?.data?.error?.message || 'Error updating program');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (!program) {\r\n    return (\r\n      <div className=\"min-h-screen bg-slate-50\" style={{\r\n        backgroundImage: `\r\n          radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.1) 0%, transparent 50%),\r\n          radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.1) 0%, transparent 50%),\r\n          radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.1) 0%, transparent 50%)\r\n        `\r\n      }}>\r\n        <Header />\r\n        <div className=\"max-w-4xl mx-auto py-16 px-4\">\r\n          <div className=\"text-center\">\r\n            <div className=\"bg-white/70 backdrop-blur-lg rounded-2xl shadow-xl shadow-slate-300/20 border border-white/20 p-12 max-w-sm mx-auto\">\r\n              <div className=\"animate-spin text-4xl mb-4\">âš¡</div>\r\n              <p className=\"text-slate-600 font-medium\">Loading program details...</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-slate-50\" style={{\r\n      backgroundImage: `\r\n        radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.1) 0%, transparent 50%),\r\n        radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.1) 0%, transparent 50%),\r\n        radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.1) 0%, transparent 50%)\r\n      `\r\n    }}>\r\n      <Header />\r\n      \r\n      <div className=\"max-w-4xl mx-auto py-8 px-4 sm:px-6 lg:px-8\">\r\n        <div className=\"mb-8\">\r\n          <div className=\"bg-white/60 backdrop-blur-sm rounded-2xl p-6 shadow-lg shadow-slate-200/50 border border-white/30\">\r\n            <div className=\"flex items-center mb-2\">\r\n              <PencilIcon className=\"text-primary mr-3\" size={32} />\r\n              <h1 className=\"text-4xl font-bold text-primary drop-shadow-sm\">Edit Program</h1>\r\n            </div>\r\n            <p className=\"text-slate-600 font-medium\">Update the program details and settings</p>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"bg-white/70 backdrop-blur-lg rounded-2xl shadow-xl shadow-slate-300/20 border border-white/20 p-8\">\r\n          {error && (\r\n            <div className=\"bg-red-50/80 backdrop-blur-sm border border-red-200/50 text-red-700 px-6 py-4 rounded-xl mb-6 shadow-lg shadow-red-100/50\">\r\n              <div className=\"flex items-center mb-2\">\r\n                <XCircleIcon className=\"text-red-600 mr-2\" size={20} />\r\n                <div className=\"font-semibold\">Error</div>\r\n              </div>\r\n              <p>{error}</p>\r\n            </div>\r\n          )}\r\n          \r\n          <form onSubmit={handleSubmit(onSubmit)}>\r\n            <Input\r\n              label=\"Program Name\"\r\n              name=\"name\"\r\n              register={register}\r\n              errors={errors}\r\n              required\r\n            />\r\n            \r\n            <DateTimeInput\r\n              label=\"Program Date & Time\"\r\n              name=\"date\"\r\n              control={control}\r\n              errors={errors}\r\n              required\r\n            />\r\n            \r\n            <Input\r\n              label=\"Venue\"\r\n              name=\"venue\"\r\n              register={register}\r\n              errors={errors}\r\n              required\r\n            />\r\n            \r\n            <Textarea\r\n              label=\"Description\"\r\n              name=\"description\"\r\n              register={register}\r\n              errors={errors}\r\n              required\r\n              rows={6}\r\n            />\r\n            \r\n            <div className=\"flex space-x-4 pt-4\">\r\n              <Button type=\"submit\" disabled={loading} className=\"flex items-center\">\r\n                {loading ? (\r\n                  <>\r\n                    <BoltIcon className=\"mr-2\" size={20} />\r\n                    Updating...\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <RocketIcon className=\"mr-2\" size={20} />\r\n                    Update Program\r\n                  </>\r\n                )}\r\n              </Button>\r\n              \r\n              <Button \r\n                variant=\"secondary\" \r\n                onClick={() => router.push('/admin/dashboard')}\r\n                className=\"flex items-center\"\r\n              >\r\n                <ArrowLeftIcon className=\"mr-2\" size={16} />\r\n                Cancel\r\n              </Button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function EditProgram({ params }: EditProgramProps) {\r\n  return (\r\n    <AdminWrapper>\r\n      <EditProgramContent params={params} />\r\n    </AdminWrapper>\r\n  );\r\n}"],"names":[],"mappings":"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"}